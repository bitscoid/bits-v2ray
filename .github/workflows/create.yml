name: "ğŸŒ² Create Branches"

on:
  workflow_dispatch:

jobs:
  create_branches:
    runs-on: ubuntu-latest
    name: "ğŸŒ² Create Branches"
    env:
      BRANCH_BASE_NAME: x
      BRANCH_COUNT: 300

    steps:
      - name: âš™ï¸ Setup
        run: |
          git config --global user.email "${{ secrets.GH_EMAIL }}"
          git config --global user.name "${{ secrets.GH_USERNAME }}"

      - name: ğŸ“¦ Clone
        run: |
          git clone https://${{ secrets.TOKEN }}@github.com/${{github.repository}}.git
          cd $(echo ${{github.repository}} | awk -F'/' '{print $2}')

      - name: ğŸŒ¿ Push Branches
        run: |
          cd $(echo ${{github.repository}} | awk -F'/' '{print $2}')
          for ((i=1; i<=${{ env.BRANCH_COUNT }}; i++)); do
              branch_name="${{ env.BRANCH_BASE_NAME }}${i}"
              git branch $branch_name
              git checkout $branch_name
              git commit --allow-empty -m "Init ${branch_name}"
              git push origin $branch_name
              git checkout master
          done
